<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация | Ocean Wonders</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Стили такие же как в login.html */
    </style>
</head>
<body>
    <div class="auth-container">
        <h2>Регистрация</h2>
        
        <div class="form-group">
            <input type="text" id="username" placeholder="Имя пользователя">
        </div>
        
        <div class="form-group">
            <input type="password" id="password" placeholder="Пароль">
        </div>
        
        <button onclick="register()">Зарегистрироваться</button>
        
        <div class="switch-auth">
            Уже есть аккаунт? <a href="login.html">Войти</a>
        </div>
    </div>

    <script>
        function rot13(str) {
            return str.replace(/[a-zA-Z]/g, function(c) {
                return String.fromCharCode((c <= "Z" ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);
            });
        }
        
        function register() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if(!username || !password) {
                alert('Заполните все поля!');
                return;
            }
            
            let users = JSON.parse(localStorage.getItem('users') || []);
            
            if(users.some(u => u.username === username)) {
                alert('Пользователь уже существует!');
                return;
            }
            
            users.push({
                username: username,
                password: rot13(password)
            });
            
            localStorage.setItem('users', JSON.stringify(users));
            
            // Инициализируем баланс
            let socksData = JSON.parse(localStorage.getItem('socksData') || {});
            socksData[username] = 0;
            localStorage.setItem('socksData', JSON.stringify(socksData));
            
            // Автовход
            localStorage.setItem('currentUser', JSON.stringify({
                username: username,
                password: rot13(password)
            }));
            
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
